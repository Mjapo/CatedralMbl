<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/styleAdmPage.css">
    <title>Document</title>
</head>
<body class="fundo">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar se o token de autorização está presente
            const token = localStorage.getItem('token');

            // Se o token estiver presente, fazer uma requisição para validar o token
            if (token) {
                fetch("http://localhost:8080/api/admin/auth", {
                    method: "POST", // Método usado para fazer a requisição
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded', // Adapte o cabeçalho conforme necessário
                        'Authorization': `Bearer ${token}`, // Adiciona o token ao cabeçalho Authorization
                    },
                })
                .then(response => {
                    if (response.ok) {
                        // Token válido, continue com o que precisar
                        console.log("Token válido");
                    } else {
                        // Token inválido, redirecionar para a página de login
                        console.log("Token inválido");
                        window.location.href = 'http://127.0.0.1:5500/CatedralMbl/pages/loginAdm.html';
                    }
                })
                .catch(error => {
                    console.error('Erro durante a requisição:', error);
                    window.location.href = 'http://127.0.0.1:5500/CatedralMbl/pages/loginAdm.html';
                });
            } else {
                window.location.href = 'http://127.0.0.1:5500/CatedralMbl/pages/loginAdm.html';
            }
        });
    </script>
    <header class="cabecalho">
        <img class="cabecalho_imagem" src="../img/Catedral.webp" alt="Logo da catedral">
        <div>
            <h1>Administração</h1>
            <button>Deletar artigos</button>
        </div>
    </header>
    <main>
        <form action="http://localhost:8080/api/upload" method="post" enctype="multipart/form-data">
            <input type="file" id="file" name="file">
            <input type="submit">
            <select name="tema">
                <option value="economia">Economia</option>
                <option value="filosofia">Filosofia</option>
                <option value="geopolitica">Geopolitica</option>
                <option value="historia">Historia</option>
            </select>
        </form>
    </main>

</body>
</html>